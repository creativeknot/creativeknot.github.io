<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Embedded development environment in Vim (2019) - Part 1 | Creative Nobody</title>
    <meta name="description" content="There has been a lot of tutorials on setting up vim for a Python/JavaScript/Java/C/C++ environment, but I did not find a variety of tutorials on how to setup a C/C++ environment for embedded development. I did, however, find one great post.. where he did explain how to setup for one. Although his post does a great job explaining, there were still some things missing that I want to add for my embedded development environment. Things that I wanted to work for my setup">
    
    
    <link rel="preload" href="/assets/css/0.styles.996050fc.css" as="style"><link rel="preload" href="/assets/js/app.21699588.js" as="script"><link rel="preload" href="/assets/js/5.de86665e.js" as="script"><link rel="preload" href="/assets/js/11.ad6402e9.js" as="script"><link rel="preload" href="/assets/js/7.82e48860.js" as="script"><link rel="prefetch" href="/assets/js/10.0cebb8a0.js"><link rel="prefetch" href="/assets/js/12.a92b2594.js"><link rel="prefetch" href="/assets/js/13.2a4e823e.js"><link rel="prefetch" href="/assets/js/14.1d7be906.js"><link rel="prefetch" href="/assets/js/2.d51e3489.js"><link rel="prefetch" href="/assets/js/3.0fb8e118.js"><link rel="prefetch" href="/assets/js/4.ef9dae53.js"><link rel="prefetch" href="/assets/js/6.eafbcd9b.js"><link rel="prefetch" href="/assets/js/8.341d9590.js"><link rel="prefetch" href="/assets/js/9.2f5fa396.js">
    <link rel="stylesheet" href="/assets/css/0.styles.996050fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><header class="tcn__header font-open" data-v-78881c04><div class="header__menu p-4 flex flex-row-reverse justify-between items-center bg-gray-900 shadow-md" data-v-78881c04><a href="#" class="text-white no-underline md:hidden" data-v-78881c04>Menu</a> <h1 data-v-78881c04><a href="/" class="text-white text-xl no-underline md:text-4xl" data-v-78881c04>Arnold <span class="text-blue-600" data-v-78881c04>Chand</span></a></h1> <ul class="menu__list bg-gray-900 hidden md:inline" data-v-78881c04><li class="menu__item md:inline" data-v-78881c04><a href="/about" class="menu__link px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>About</a></li><li class="menu__item md:inline" data-v-78881c04><a href="/posts/" class="menu__link px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>Posts</a></li><li class="menu__item md:inline" data-v-78881c04><a href="https://github.com/thecreativenobody" class="menu__link px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>Github</a></li><li class="menu__item md:inline" data-v-78881c04><a href="https://linkedin.com/in/arnoldjchand" class="menu__link px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>LinkedIn</a></li></ul></div> <div class="header__menu--mobile text-center shadow-md md:hidden hidden" data-v-78881c04><ul class="menu__list--mobile bg-gray-900" data-v-78881c04><li class="menu__item--mobile py-2" data-v-78881c04><a href="/about" class="menu__link--mobile px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>About</a></li><li class="menu__item--mobile py-2" data-v-78881c04><a href="/posts/" class="menu__link--mobile px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>Posts</a></li><li class="menu__item--mobile py-2" data-v-78881c04><a href="https://github.com/thecreativenobody" class="menu__link--mobile px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>Github</a></li><li class="menu__item--mobile py-2" data-v-78881c04><a href="https://linkedin.com/in/arnoldjchand" class="menu__link--mobile px-2 no-underline text-lg text-white hover:underline" data-v-78881c04>LinkedIn</a></li></ul></div> <!----></header> <section class="tcn__body container mx-auto px-2 md:px-5"><div class="content default"><div class="post__props"><h1 class="post__title text-3xl">Embedded development environment in Vim (2019) - Part 1</h1> <div class="post__block font-open-light text-sm text-right"><span class="post__date">Posted on Feb 8, 2019</span> | <span class="post__author">By Arnold Chand</span></div></div> <div class="tip font-open"><p class="tip__title font-bold">Info</p><p>This is a two part series on how my vim is setup for embedded systems development. The first part shows what vim plugins I use and how I have them setup, while part two will cover the cmake portion on setting up a build workflow and a template.</p></div><p>There has been a lot of tutorials on setting up vim for a Python/JavaScript/Java/C/C++ environment, but I did not find a variety of tutorials on how to setup a C/C++ environment for embedded development. I did, however, find one great post <a href="http://www.alexeyshmalko.com/2014/using-vim-as-c-cpp-ide/" target="_blank" rel="noopener noreferrer">written by Alexey<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> where he did explain how to setup for one. Although his post does a great job explaining, there were still some things missing that I want to add for my embedded development environment. Things that I wanted to work for my setup:</p> <ul><li>Using <code>cmake</code> instead of <code>make</code>.</li> <li>Build a custom gcc toolchain for specific boards.</li> <li>Have an all-in-one solution package that features IDE-like tools like linting, auto-completion, goto definition, etc.</li></ul> <p>So after a bit of digging and a lot of frustration on how limited resources there were, I finally found some useful resources that I was able to put together and have it working. Here are my findings and how I was able to get myself up and running for my requirements. The development board I will be using is the TI TM4C129EXL microcontroller, but the steps on setup is very similiar for other microcontrollers like other TI, STM manufacturers. Here is a picture.</p> <img width="50%" src="http://image.itmedia.co.jp/edn/articles/1509/27/ts150925_TI01.jpg"> <p>So the things to install (this might differ since my setup is on a Linux system):</p> <ul><li><a href="https://neovim.io/" target="_blank" rel="noopener noreferrer">neovim<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> or <a href="https://www.vim.org/" target="_blank" rel="noopener noreferrer">vim8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>vim-plug</strong> - plugin manager | <a href="https://github.com/junegunn/vim-plug" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>deoplete</strong> - auto-completion engine | <a href="https://github.com/Shougo/deoplete.nvim" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>supertab</strong> - for tab completion, instead of using Ctrl+n and Ctrl+p | <a href="https://github.com/ervandew/supertab" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>LanguageClient-neovim</strong> - LSP client for neovim, also works in vim | <a href="https://github.com/autozimu/LanguageClient-neovim" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>clang</strong> - to get <code>clangd</code> which will be used as our LSP server backend | <a href="https://clang.llvm.org/" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>cmake</strong> - build tool | <a href="https://cmake.org/" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><strong>arm-gcc-toolchain</strong> - C compiler for ARM boards | <a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="vim-install-plugins"><a href="#vim-install-plugins" aria-hidden="true" class="header-anchor">#</a> Vim - install plugins</h2> <div class="language-vim extra-class"><pre class="language-vim"><code><span class="token keyword">call</span> plug#<span class="token function">begin</span><span class="token punctuation">(</span><span class="token string">'~/.local/share/nvim/plugged'</span><span class="token punctuation">)</span>

<span class="token comment">&quot; Auto-completion</span>
Plug <span class="token string">'Shougo/deoplete.nvim'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'do'</span><span class="token punctuation">:</span> <span class="token string">':UpdateRemotePlugins'</span> <span class="token punctuation">}</span>
<span class="token comment">&quot; Tab for auto-completion</span>
Plug <span class="token string">'ervandew/supertab'</span>
<span class="token comment">&quot; Language client for a Language Server Protocol support</span>
Plug <span class="token string">'autozimu/LanguageClient-neovim'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'branch'</span><span class="token punctuation">:</span> <span class="token string">'next'</span><span class="token punctuation">,</span> <span class="token string">'do'</span><span class="token punctuation">:</span> <span class="token string">'bash install.sh'</span> <span class="token punctuation">}</span>
<span class="token comment">&quot; Fuzzy file finder</span>
Plug <span class="token string">'junegunn/fzf'</span>

<span class="token keyword">call</span> plug#<span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">&quot; Plugin and Indent enable</span>
<span class="token keyword">filetype</span> plugin indent <span class="token keyword">on</span>
</code></pre></div><p>Next, we reload vim and execute command <code>:PlugInstall</code> to install the plugins, and reloading vim should load our plugins.</p> <h3 id="plugin-configs-and-key-bindings"><a href="#plugin-configs-and-key-bindings" aria-hidden="true" class="header-anchor">#</a> Plugin configs and key bindings</h3> <p>Now we add our global configs for our plugins. We want to make sure deoplete starts by default, supertab has an issue where it will tab complete from the bottom-top (although this is a feature in supertab) I like my tab completion from the top-bottom. Next we add our config for LanguageClient-neovim, the LSP server I will be using is <code>clangd</code>. The only binding I use is the goto definition, but you can add other bindings for LanguageClient-neovim more can found on their github repo.</p> <div class="language-vim extra-class"><pre class="language-vim"><code><span class="token comment">&quot; --- Deoplete Options ---</span>
<span class="token keyword">let</span> g<span class="token punctuation">:</span>deoplete#enable_at_startup<span class="token operator">=</span><span class="token number">1</span>

<span class="token comment">&quot; --- SuperTab Options --- </span>
<span class="token keyword">let</span> g<span class="token punctuation">:</span>SuperTabDefaultCompletionType<span class="token operator">=</span><span class="token string">'&lt;C-n&gt;'</span>

<span class="token comment">&quot; --- LanguageClient Options --- </span>
<span class="token keyword">let</span> g<span class="token punctuation">:</span>LanguageClient_serverCommands<span class="token operator">=</span><span class="token punctuation">{</span>
	\ <span class="token string">'c'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'clangd'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	\ <span class="token string">'cpp'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'clangd'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	\ <span class="token punctuation">}</span>

<span class="token comment">&quot; LanguageClient bindings</span>
nnoremap <span class="token operator">&lt;</span>F5<span class="token operator">&gt;</span> <span class="token punctuation">:</span><span class="token keyword">call</span> <span class="token function">LanguageClient_contextMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span>
nnoremap <span class="token operator">&lt;</span><span class="token keyword">silent</span><span class="token operator">&gt;</span> <span class="token builtin">gd</span> <span class="token punctuation">:</span><span class="token keyword">call</span> LanguageClient#<span class="token function">textDocument_definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>CR<span class="token operator">&gt;</span>
</code></pre></div><p>This should be it on the vim side of things. In the next part I will show my setup of cmake and a template I usually use for developing for the TM4C microcontroller - which is just a blank template from their website but very helpful. Stay tuned for more.</p></div></section> <footer class="tcn__footer flex items-center justify-center text-white bg-black"><h6 class="footer__copyright text-xs">2019 Arnold Chand (thecreativenobody) | powered by <a target="_blank" href="https://vuepress.vuejs.org/" class="footer__link underline">vuepress</a>, <a target="_blank" href="https://tailwindcss.com/" class="footer__link underline">tailwindcss</a></h6></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.21699588.js" defer></script><script src="/assets/js/5.de86665e.js" defer></script><script src="/assets/js/11.ad6402e9.js" defer></script><script src="/assets/js/7.82e48860.js" defer></script>
  </body>
</html>
